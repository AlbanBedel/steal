#!/usr/bin/env node
var path = require("path"),
	program = require("commander"),
	steal = require("stealjs"),
	package = require("../package.json");

program.version(package.version)
	.usage("[options] <file ...>")
	.option("-o, --out [folder]", "Name of the application folder")
	.option("--include-steal", "Package steal with the build")
	.parse(process.argv);

// If no arguments are provided, show the help and exit.
if(!program.args.length) {
	program.help();
}

var inFile = program.args[0],
	outDirectory = program.out;
if(!outDirectory) {
	outDirectory = path.dirname(inFile);
}

steal("build", function(build){

	build(inFile, {
		to: outDirectory,
		packageSteal: !!program.includeSteal
	});

});
